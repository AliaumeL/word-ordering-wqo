\section{Preliminaries}
\label{prelims:sec}

\paragraph*{Finite words.} \AP In this paper, we use upper Greek letters
$\Sigma, \Gamma$ to denote finite alphabets, $\Sigma^*$ to denote the set of
finite words over $\Sigma$, and $\varepsilon$ for the empty word in $\Sigma^*$.
In order to give some intuition on the decision problems, we will sometimes use
the notion of \intro{finite automata}, \intro{regular languages}, and Monadic
Second Order logic ($\intro*\MSO$) over finite words, and assume the reader to
be familiar with them. We refer to the textbook of \cite{THOM97} for a detailed
introduction. However, we will require no prior knowledge on word
combinatorics.

\paragraph*{Orderings and Well-Quasi-Orderings.}
\AP
A \intro{quasi-order} is a
reflexive and transitive binary relation, it is a \intro{partial order} if it
is furthermore antisymmetric. A \intro{total order} is a \kl{partial order}
where any two elements are comparable. Let us now introduce some notations for
\kl{well-quasi-orders}. A sequence $\seqof{x_i}$ in a set $X$ is
\intro(sequence){good} if there exist $i < j$ such that $x_i \leq x_j$. It is
\intro(sequence){bad} otherwise. Therefore, a \kl{well-quasi-ordered} set is a
set where every infinite sequence is \kl(sequence){good}. A \intro{decreasing
sequence} is a sequence $\seqof{x_i}$ such that $x_{i+1} < x_i$ for all $i$,
a \intro{chain} is a sequence such that $x_i \leq x_{i+1}$ for all $i$, and
an \intro{antichain} is a set of pairwise incomparable elements.
An equivalent definition of a \kl{well-quasi-ordered} set is that it contains no
infinite \kl{decreasing sequences}, nor infinite \kl{antichains}. We refer to
\cite{SCSC12} for a detailed survey on well-quasi-orders.

The \kl{prefix relation} (resp. the \kl{suffix relation} and the \kl{infix
relation}) on $\Sigma^*$ are always \intro{well-founded}, i.e., there are no
infinite \kl{decreasing sequences} for this ordering. In particular, for a
language $L \subseteq \Sigma^*$ to be \kl{well-quasi-ordered} with respect to 
one of these orderings, it suffices to
prove that it contains no infinite \kl{antichain}. 

A useful operation on quasi-ordered sets is to compute the \intro{upwards
closure} of a set $S$ for a relation $\preceq$, which is defined as
$\upset[\preceq]{S} \defined \setof{y \in \Sigma^*}{ \exists x \in S. x \preceq
y}$. In this paper, we will also use the symmetric notion of \intro{downwards
closure}: $\dwset[\preceq]{S} \defined \setof{y \in \Sigma^*}{ \exists x \in S.
y \preceq x}$. Abusing notations, we will write $\upset{w}$ and $\dwset{w}$ for
the upwards and downwards closure of a single element $w$, omitting the
ordering relation when it is clear from the context. A set $S$ is called
\intro{downwards closed} if $\dwset{S} = S$.

\paragraph*{Ordinal Invariants.} \label{ordinal-invariants:subsec}
\AP
An \intro{ordinal} is a \kl{well-founded} \kl{totally ordered}
set. We use $\alpha, \beta, \gamma$ to denote ordinals, and use $\intro*\omegaOrd$ to
denote the first infinite \kl{ordinal}, i.e., the set of natural numbers with the
usual ordering. We also use $\intro*\omegaOne$ to denote the first \emph{uncountable}
ordinal.
We only assume superficial familiarity with ordinal arithmetic, and
refer to the books of Kunen \cite{KUNEN80} and Krivine~\cite[Chapter
II]{KRIVINE71} for a detailed introduction to this domain.
Given a tree $T$
whose branches are all finite we can define an \kl{ordinal} $\alpha_T$ inductively
as follows: if $T$ is a leaf then $\alpha_T = 0$, if $T$ has children
$\seqof{T_i}[i \in I]$ then $\alpha_T = \sup \setof{\alpha_{T_i} + 1}{i \in I}$. We
say that $\alpha_T$ is the \intro(ordinal){rank} of $T$. 

\AP Let $(X, \leq)$ be a \kl{well-quasi-ordered} set. One can define three
well-founded trees from $X$: the tree of \kl{bad sequences}, the tree of
decreasing sequences, and the tree of \kl{antichains}. The nodes of these 
trees are respectively the \kl{bad sequences}, the \kl{decreasing sequences},
and the \kl{antichains} of $X$, and the ancestor 
relation is the prefix relation on sequences (or subset relation on
\kl{antichains}).
The \kl(ordinal){rank}
of these trees are called respectively the \intro{maximal order type} of $X$
written $\intro*{\oType{X}}$ \cite{dejongh77}, the \intro{ordinal height} of
$X$ written $\intro*{\oHeight{X}}$ \cite{schmidt81}, and the \intro{ordinal
width} of $X$ written $\intro*{\oWidth{X}}$ \cite{kriz90b}. These three
parameters are called the \intro{ordinal invariants} of a
\kl{well-quasi-ordered} set $X$. As an example, for $(\Nat, \leq)$, all bad
sequences are \kl[decreasing sequence]{descending} and \kl{antichains} have
size at most $1$. In fact, $(\Nat, \leq)$ is itself an \kl{ordinal}, namely
$\omegaOrd$. Hence it is its own \kl{maximal order type} and \kl{ordinal
height}, and its \kl{ordinal width} is $1$. We refer to the survey of
\cite{DZSCSC20} for a detailed discussion on these concepts and their computation
on specific classes of well-quasi-ordered sets.

\AP
We will use the following inequality between \kl{ordinal invariants}, due to
\cite{kriz90b}, and that was recalled in \cite[Theorem 3.8]{DZSCSC20}:
$\oType{X} \leq \oHeight{X} \oComProd \oWidth{X}$, where $\intro*\oComProd$ is
the \intro{commutative ordinal product}, also known as the \reintro{Hessenberg
product}. We will not recall the definition of this product here, and refer to
\cite[Section 3.5]{DZSCSC20} for a detailed introduction to this concept. The
only equalities we will use are $\omegaOrd \oComProd \omegaOrd = \omegaOrd^2$
and $\omegaOrd^2 \oComProd \omegaOrd = \omegaOrd^3$.

